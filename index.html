<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>M77 AG Calculator</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #1a1a1a;
            color: #fff;
            padding: 20px;
            margin: 0;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        h1 {
            text-align: center;
            color: #a0845c;
            margin-bottom: 30px;
        }
        .input-section {
            background: #2a2a2a;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 30px;
        }
        .input-group {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }
        .input-group div {
            flex: 1;
        }
        label {
            display: block;
            margin-bottom: 5px;
            color: #a0845c;
            font-weight: bold;
        }
        input, select {
            width: 100%;
            padding: 10px;
            background: #333;
            border: 1px solid #555;
            color: #fff;
            border-radius: 4px;
        }
        .discount-banner {
            background: #a0845c;
            color: #000;
            padding: 15px;
            text-align: center;
            font-weight: bold;
            margin-bottom: 20px;
            border-radius: 4px;
            display: none;
        }
        table {
            width: 100%;
            background: #2a2a2a;
            border-collapse: collapse;
            margin-bottom: 30px;
        }
        th {
            background: #333;
            color: #a0845c;
            padding: 12px;
            text-align: left;
            font-weight: bold;
        }
        td {
            padding: 10px;
            border-bottom: 1px solid #333;
        }
        .service-header {
            background: #1a1a1a;
            color: #a0845c;
            font-weight: bold;
            text-transform: uppercase;
        }
        .summary {
            background: #2a2a2a;
            padding: 20px;
            border-radius: 8px;
            border: 2px solid #a0845c;
            margin-bottom: 30px;
        }
        .summary h2 {
            color: #a0845c;
            margin-bottom: 15px;
        }
        .summary-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #333;
        }
        .customer-section {
            background: #2a2a2a;
            padding: 30px;
            border-radius: 8px;
            border: 2px solid #a0845c;
        }
        .customer-section h2 {
            color: #a0845c;
            margin-bottom: 20px;
            text-align: center;
        }
        .form-row {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
        }
        .form-group {
            flex: 1;
        }
        .submit-btn {
            background: #a0845c;
            color: #000;
            border: none;
            padding: 15px 50px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            border-radius: 4px;
            display: block;
            margin: 30px auto 0;
        }
        .submit-btn:hover {
            background: #b8956a;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>M77 AG - Custom Farming Calculator</h1>
        
        <div class="input-section">
            <div class="input-group">
                <div>
                    <label>Total Acres</label>
                    <input type="number" id="acres" value="0" min="0">
                </div>
                <div>
                    <label>Primary Crop Type</label>
                    <select id="crop">
                        <option value="">Select Crop Type</option>
                        <option value="corn">Corn</option>
                        <option value="wheat">Wheat</option>
                        <option value="milo">Milo</option>
                    </select>
                </div>
            </div>
            
            <div id="discount-banner" class="discount-banner">
                Volume Discount: <span id="discount-rate">0%</span> OFF
            </div>
        </div>

        <table>
            <thead>
                <tr>
                    <th>Select</th>
                    <th>Service</th>
                    <th>Market Rate</th>
                    <th>Your Rate</th>
                    <th>Custom Rate</th>
                    <th>Total Cost</th>
                    <th>You Save</th>
                </tr>
            </thead>
            <tbody>
                <tr class="service-header">
                    <td colspan="7">TILLAGE OPERATIONS</td>
                </tr>
                <tr>
                    <td><input type="checkbox" id="s1"></td>
                    <td>Discing</td>
                    <td>$18.75</td>
                    <td id="r1">$18.75</td>
                    <td><input type="number" id="c1" min="0" step="0.01"></td>
                    <td id="t1">$0.00</td>
                    <td id="sv1">$0.00</td>
                </tr>
                <tr>
                    <td><input type="checkbox" id="s2"></td>
                    <td>Chisel Plow</td>
                    <td>$21.25</td>
                    <td id="r2">$21.25</td>
                    <td><input type="number" id="c2" min="0" step="0.01"></td>
                    <td id="t2">$0.00</td>
                    <td id="sv2">$0.00</td>
                </tr>
                <tr>
                    <td><input type="checkbox" id="s3"></td>
                    <td>Field Finisher</td>
                    <td>$15.25</td>
                    <td id="r3">$15.25</td>
                    <td><input type="number" id="c3" min="0" step="0.01"></td>
                    <td id="t3">$0.00</td>
                    <td id="sv3">$0.00</td>
                </tr>
                <tr>
                    <td><input type="checkbox" id="s4"></td>
                    <td>Strip Tillage</td>
                    <td>$13.50</td>
                    <td id="r4">$13.50</td>
                    <td><input type="number" id="c4" min="0" step="0.01"></td>
                    <td id="t4">$0.00</td>
                    <td id="sv4">$0.00</td>
                </tr>
                <tr class="service-header">
                    <td colspan="7">PLANTING OPERATIONS</td>
                </tr>
                <tr>
                    <td><input type="checkbox" id="s5"></td>
                    <td>Corn Planting</td>
                    <td>$28.50</td>
                    <td id="r5">$28.50</td>
                    <td><input type="number" id="c5" min="0" step="0.01"></td>
                    <td id="t5">$0.00</td>
                    <td id="sv5">$0.00</td>
                </tr>
                <tr>
                    <td><input type="checkbox" id="s6"></td>
                    <td>Milo Planting</td>
                    <td>$26.75</td>
                    <td id="r6">$26.75</td>
                    <td><input type="number" id="c6" min="0" step="0.01"></td>
                    <td id="t6">$0.00</td>
                    <td id="sv6">$0.00</td>
                </tr>
                <tr>
                    <td><input type="checkbox" id="s7"></td>
                    <td>Small Grain Drilling</td>
                    <td>$19.25</td>
                    <td id="r7">$19.25</td>
                    <td><input type="number" id="c7" min="0" step="0.01"></td>
                    <td id="t7">$0.00</td>
                    <td id="sv7">$0.00</td>
                </tr>
                <tr class="service-header">
                    <td colspan="7">APPLICATION SERVICES</td>
                </tr>
                <tr>
                    <td><input type="checkbox" id="s8"></td>
                    <td>Fertilizer Application</td>
                    <td>$9.25</td>
                    <td id="r8">$9.25</td>
                    <td><input type="number" id="c8" min="0" step="0.01"></td>
                    <td id="t8">$0.00</td>
                    <td id="sv8">$0.00</td>
                </tr>
                <tr class="service-header">
                    <td colspan="7">HARVESTING SERVICES</td>
                </tr>
                <tr>
                    <td><input type="checkbox" id="s9"></td>
                    <td>Corn Harvesting</td>
                    <td>$46.25</td>
                    <td id="r9">$46.25</td>
                    <td><input type="number" id="c9" min="0" step="0.01"></td>
                    <td id="t9">$0.00</td>
                    <td id="sv9">$0.00</td>
                </tr>
                <tr>
                    <td><input type="checkbox" id="s10"></td>
                    <td>Milo Harvesting</td>
                    <td>$44.75</td>
                    <td id="r10">$44.75</td>
                    <td><input type="number" id="c10" min="0" step="0.01"></td>
                    <td id="t10">$0.00</td>
                    <td id="sv10">$0.00</td>
                </tr>
                <tr>
                    <td><input type="checkbox" id="s11"></td>
                    <td>Wheat Harvesting</td>
                    <td>$42.50</td>
                    <td id="r11">$42.50</td>
                    <td><input type="number" id="c11" min="0" step="0.01"></td>
                    <td id="t11">$0.00</td>
                    <td id="sv11">$0.00</td>
                </tr>
            </tbody>
        </table>

        <div class="summary">
            <h2>CONTRACT SUMMARY</h2>
            <div class="summary-row">
                <span>Subtotal:</span>
                <span id="subtotal">$0.00</span>
            </div>
            <div class="summary-row">
                <span>Discount:</span>
                <span id="discount">$0.00</span>
            </div>
            <div class="summary-row">
                <span>Total:</span>
                <span id="total">$0.00</span>
            </div>
        </div>

        <div class="customer-section">
            <h2>Customer Information</h2>
            <p style="text-align: center; color: #888;">Testing: Emails to kyle@togoag.com</p>
            <div class="form-row">
                <div class="form-group">
                    <label>Operation Name</label>
                    <input type="text" id="op-name">
                </div>
                <div class="form-group">
                    <label>Number of Fields</label>
                    <input type="number" id="fields" min="1">
                </div>
            </div>
            <div class="form-row">
                <div class="form-group">
                    <label>Start Date</label>
                    <input type="date" id="start">
                </div>
                <div class="form-group">
                    <label>Finish Date</label>
                    <input type="date" id="finish">
                </div>
            </div>
            <button class="submit-btn" onclick="submitForm()">SUBMIT PROPOSAL</button>
        </div>
    </div>

    <script type="text/javascript">
        var rates = [18.75, 21.25, 15.25, 13.50, 28.50, 26.75, 19.25, 9.25, 46.25, 44.75, 42.50];
        var names = ['Discing', 'Chisel Plow', 'Field Finisher', 'Strip Tillage', 'Corn Planting', 'Milo Planting', 'Small Grain Drilling', 'Fertilizer Application', 'Corn Harvesting', 'Milo Harvesting', 'Wheat Harvesting'];

        function calc() {
            var a = parseFloat(document.getElementById('acres').value) || 0;
            
            var d = 0;
            if (a >= 300) d = 0.14;
            else if (a >= 200) d = 0.10;
            else if (a >= 100) d = 0.07;
            
            var banner = document.getElementById('discount-banner');
            if (d > 0 && a > 0) {
                banner.style.display = 'block';
                document.getElementById('discount-rate').innerHTML = Math.round(d * 100) + '%';
            } else {
                banner.style.display = 'none';
            }
            
            var total = 0;
            var saved = 0;
            
            for (var i = 1; i <= 11; i++) {
                var rate = rates[i-1];
                var newRate = rate * (1 - d);
                
                document.getElementById('r' + i).innerHTML = '$' + newRate.toFixed(2);
                
                var cb = document.getElementById('s' + i);
                if (cb && cb.checked && a > 0) {
                    var custom = parseFloat(document.getElementById('c' + i).value) || 0;
                    var useRate = custom > 0 ? custom : newRate;
                    var cost = useRate * a;
                    var save = (rate - useRate) * a;
                    
                    document.getElementById('t' + i).innerHTML = '$' + cost.toFixed(2);
                    document.getElementById('sv' + i).innerHTML = '$' + Math.max(0, save).toFixed(2);
                    
                    total += cost;
                    saved += Math.max(0, save);
                } else {
                    document.getElementById('t' + i).innerHTML = '$0.00';
                    document.getElementById('sv' + i).innerHTML = '$0.00';
                }
            }
            
            document.getElementById('subtotal').innerHTML = '$' + total.toFixed(2);
            document.getElementById('discount').innerHTML = '-$' + saved.toFixed(2);
            document.getElementById('total').innerHTML = '$' + total.toFixed(2);
        }

        function submitForm() {
            var name = document.getElementById('op-name').value;
            var fields = document.getElementById('fields').value;
            var start = document.getElementById('start').value;
            var finish = document.getElementById('finish').value;
            var acres = document.getElementById('acres').value;
            var total = document.getElementById('total').innerHTML;
            
            if (!name || !fields || !start || !finish) {
                alert('Please fill all fields');
                return;
            }
            
            var services = [];
            for (var i = 1; i <= 11; i++) {
                if (document.getElementById('s' + i).checked) {
                    services.push(names[i-1] + ': ' + document.getElementById('t' + i).innerHTML);
                }
            }
            
            if (services.length == 0) {
                alert('Please select services');
                return;
            }
            
            var msg = 'M77 AG PROPOSAL\n\n';
            msg += 'Operation: ' + name + '\n';
            msg += 'Fields: ' + fields + '\n';
            msg += 'Acres: ' + acres + '\n';
            msg += 'Start: ' + start + '\n';
            msg += 'Finish: ' + finish + '\n\n';
            msg += 'Services:\n' + services.join('\n');
            msg += '\n\nTotal: ' + total;
            
            var email = 'mailto:kyle@togoag.com?subject=Proposal-' + name;
            email += '&body=' + encodeURIComponent(msg);
            window.location.href = email;
        }

        window.onload = function() {
            document.getElementById('acres').onchange = calc;
            document.getElementById('acres').oninput = calc;
            
            for (var i = 1; i <= 11; i++) {
                document.getElementById('s' + i).onchange = calc;
                document.getElementById('c' + i).onchange = calc;
                document.getElementById('c' + i).oninput = calc;
            }
            
            calc();
        };
    </script>
</body>
</html>
